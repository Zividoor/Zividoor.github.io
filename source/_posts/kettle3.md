---
title: Kettle 集群开发
date: 2019-04-24 10:06:05
tag:
---

### trans集群开发

新建trans，在主对象树子服务器中右键，新建，填写服务器连接信息。
![info](1.png)

注意：该部分配置信息需要和carte-config-m、aster，-8080.xml配置信息一致，由于是主服务器，需要勾选最后一栏。

然后填写两个子服务器信息，需要和-8081.xml和-8082.xml中的信息一致。
* 注意 
    服务器的名称一定要与pwd文件夹下面的配置文件<name>属性所对应的值是一致的。所新建的子服务器一定要在pwd文件夹下面要有对应的配置文件才可以。
![info](2.png)
![info](3.png)

在主对象树中的kettle集群Schemas，右键，新建，选择子服务器，将刚刚配置好的三台子服务器添加到Schemas中。

![info](5.png)

然后点击确定。

接下来对需要进行集群的节点右键选择集群


选择已经设置好的集群
![info](6.jpg)

使用集群启动，需要先进行启动配置，选择remote中的Clustered。
![info](8.png)
然后运行的时候选择我们刚刚配置的集群运行模式即可。从日志中我们可以看到主服务器只是做任务转发和合并的工作。如果不是集群的步骤，则指定一个从服务器执行；如果是集群步骤则将输入的流分均分给从服务器执行。

### job集群开发

job的集群开发，并不是和trans一样，job的集群开主要是将trans分配到不同的子服务器中执行。
首先配置子服务器的方法和trans一样，如下图：
![info](9.png)

配置一个 run configurations ，配置job运行的服务器。
![info](10.png)

在转换步骤选择刚刚配置的启动配置
![info](11.png)

这里就完成了job的集群设置，可以让job在对应的服务器上运行。